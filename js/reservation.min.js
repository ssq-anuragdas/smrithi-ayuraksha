jQuery(window).on("load",function(){"false"!=jQuery("#appointment-step-checker").val()?jQuery("#appointment-step").val(1):jQuery("#appointment-step").val(2)}),jQuery(document).ready(function(e){function t(){$date=e("*[name=date]").val(),$stime=e("*[name=start-time]").val(),$etime=e("*[name=end-time]").val(),$staff=e("*[name=staff]").val(),$service=e("*[name=services]").val(),$staff.length>0||$service.length>0?e.ajax({method:"POST",url:drsmrithi_urls.ajaxurl,type:"html",data:{action:"psychiatrist_available_times",date:$date,stime:$stime,etime:$etime,staffid:$staff,staff:e("*[name=staff] :selected").text(),serviceid:$service,service:e("*[name=services] :selected").text()},complete:function(t){if(200===t.status){var a="";e.trim(t.responseText).length>0&&(a+=t.responseText,e(".available-times").empty().append(a))}}}):alert("Please choose Service")}if(e(".dt-select-service").change(function(){var t=e(this).val();e.ajax({method:"POST",url:drsmrithi_urls.ajaxurl,type:"html",data:{action:"psychiatrist_fill_staffs",service_id:t},complete:function(t){if(200===t.status){var a="";e.trim(t.responseText).length>0&&(a+=t.responseText,e(".dt-select-staff").empty().append(a))}}})}),e("#datepicker").datepicker({minDate:0,dateFormat:"yy-mm-dd"}),e("body").hasClass("page-template-tpl-reservation-type2-php")){function a(){e(".dt-sc-goback-box").show();var t=e("#appointment-step").val(),a=parseInt(t,10)+1;e(".dt-sc-schedule-progress-wrapper .dt-sc-schedule-progress").removeClass("dt-sc-current-step"),e(".dt-sc-schedule-progress-wrapper .step"+t).addClass("dt-sc-completed-step"),e(".dt-sc-schedule-progress-wrapper .step"+a).addClass("dt-sc-current-step"),e("#appointment-step").val(a),4!=a&&1!=a||(e(".appointment-goback").hide(),e(".dt-sc-goback-box").hide())}e("body").delegate(".appointment-goback","click",function(t){e(".steps").hide();var a=e("#appointment-step").val(),s=parseInt(a,10)-1;e(".dt-sc-schedule-progress-wrapper .step"+a).removeClass("dt-sc-current-step"),e(".dt-sc-schedule-progress-wrapper .step"+s).removeClass("dt-sc-completed-step"),e(".dt-sc-schedule-progress-wrapper .step"+s).addClass("dt-sc-current-step"),e(".step"+s).fadeIn(800),e("#appointment-step").val(s),1==s&&e(".dt-sc-goback-box").hide()}),e('form[name="dt-sc-appointment-contactdetails-form"]').on("submit",function(){var t=e("#firstname").val(),s=e("#lastname").val(),i=e("#phone").val(),n=e("#emailid").val(),l=e("#address").val(),d=e("#about_your_project").val();e("#hid_firstname").val(t),e("#hid_lastname").val(s),e("#hid_phone").val(i),e("#hid_emailid").val(n),e("#hid_address").val(l),e("#hid_about_your_project").val(d);var r="<ul>";return""!=t&&(r+="<li><span>Name:</span><p>"+t+" "+s+"</p></li>"),""!=i&&(r+="<li><span>Phone:</span><p>"+i+"</p></li>"),""!=n&&(r+="<li><span>Email:</span><p>"+n+"</p></li>"),""!=l&&(r+="<li><span>Address:</span><p>"+l+"</p></li>"),""!=d&&(r+="<li><span>Message:</span><p>"+d+"</p></li>"),r+="</ul>",e("#dt-sc-contact-info").html(r),e(".dt-sc-contactdetails-box").hide(),e(".dt-sc-aboutproject-box").show(),e(".dt-sc-notification-box").show(),a(),!1}),e("body").delegate(".generate-schedule","click",function(t){var a=e("#serviceid").val(),s=e("#staffid").val(),i=e("#staffids").val(),n=e("#datepicker").val();if("Select Date"==n||""==a.length)return alert(dtAppointmentCustom.eraptdatepicker),!1;e.ajax({method:"POST",url:drsmrithi_urls.ajaxurl,type:"html",data:{action:"psychiatrist_dt_generate_schedule",serviceid:a,staffid:s,staffids:i,datepicker:n},beforeSend:function(){e(".dt-sc-timeslot-box").hide()},complete:function(t){e(".appointment-ajax-holder").html(t.responseText),e(".dt-sc-timeslot-box").fadeIn(800),e("html, body").animate({scrollTop:e(".dt-sc-timeslot-box").offset().top-200},2e3)}})}),e("body").delegate("a.time-slot","click",function(t){t.preventDefault();var s=e(this).data("daydate"),i=e(this).data("time"),n=e("*[name=serviceid] :selected").text(),l=e(this).data("staffname"),d="<ul>";""!=n&&(d+="<li><span>Department:</span><p>"+n+"</p></li>"),""!=l&&(d+="<li><span>Staff:</span><p>"+l+"</p></li>"),""!=s&&(d+="<li><span>Date:</span><p>"+s+"</p></li>"),""!=i&&(d+="<li><span>Time:</span><p>"+i+"</p></li>"),d+="</ul>",e("#dt-sc-schedule-details").html(d),e(".dt-sc-schedule-box").hide(),e(".dt-sc-contactdetails-box").fadeIn(800),e("a.time-slot").removeClass("selected"),e(this).addClass("selected"),e("ul.time-table").find("li,ul.time-slots").removeClass("selected"),e(this).parentsUntil("ul.time-table").addClass("selected"),a()}),e(".dt-sc-about-project-form .schedule-it").click(function(t){t.preventDefault(),$staffid=e("a.time-slot.selected").data("staffid"),$serviceid=e("a.time-slot.selected").data("serviceid"),$start=e("a.time-slot.selected").data("start"),$end=e("a.time-slot.selected").data("end"),$date=e("a.time-slot.selected").data("date"),$time=e("a.time-slot.selected").data("time"),$firstname=e(".dt-sc-aboutproject-box #hid_firstname").val(),$lastname=e(".dt-sc-aboutproject-box #hid_lastname").val(),$phone=e(".dt-sc-aboutproject-box #hid_phone").val(),$emailid=e(".dt-sc-aboutproject-box #hid_emailid").val(),$address=e(".dt-sc-aboutproject-box #hid_address").val(),$about_your_project=e(".dt-sc-aboutproject-box #hid_about_your_project").val(),"undefined"!=typeof $start?e.ajax({method:"POST",url:drsmrithi_urls.ajaxurl,data:{action:"psychiatrist_dttheme_new_reservation",staffid:$staffid,serviceid:$serviceid,start:$start,end:$end,date:$date,time:$time,firstname:$firstname,lastname:$lastname,phone:$phone,emailid:$emailid,address:$address,aboutyourproject:$about_your_project},dataType:"json",beforeSend:function(){e("#dt-sc-ajax-load-image").show()},success:function(t){e(".dt-sc-notification-box").show(),"Success"==t?e(".dt-sc-apt-success-box").fadeIn(800):e(".dt-sc-apt-error-box").fadeIn(800)},complete:function(){e("#dt-sc-ajax-load-image").hide(),a()}}):e("a.schedule-it").hide()})}jQuery(".select_start").on("change",function(){var e=jQuery(this).parent(),t=jQuery(this),a=jQuery(".select_end",e);t.val()?a.show():(a.hide(),t.find('option[selected="selected"]').removeAttr("selected"),a.find('option[selected="selected"]').removeAttr("selected")),jQuery("option",a).each(function(){jQuery(this).show()});var s=t.val();$current=a.data("current"),jQuery("option",a).each(function(){jQuery(this).val()<=s?(jQuery(this).hide(),jQuery(this).removeAttr("selected"),$current<jQuery(this).val()&&jQuery("option:visible:first",a).attr("selected","selected")):$current&&"00:00"!=$current||jQuery("option:visible:first",a).attr("selected","selected")})}).each(function(){var e=jQuery(this).parent(),t=jQuery(this),a=jQuery(".select_end",e);jQuery(this).val()||(a.hide(),t.find('option[selected="selected"]').removeAttr("selected"),a.find('option[selected="selected"]').removeAttr("selected"))}).trigger("change"),e(".start-time").change(function(){var t=e(this).val(),a=e("option:last",e(this));e(".end-time").empty(),e(this)[0].selectedIndex<a.index()?e("option",this).each(function(){e(this).val()>t&&e(".end-time").append(e(this).clone())}):e(".end-time").append(a.clone()).val(a.val())}),e(".show-time-shortcode").click(function(t){$date=e("*[name=date]").val(),$stime=e("*[name=start-time]").val(),$etime=e("*[name=end-time]").val(),$staff=e("*[name=staff]").val(),$service=e("*[name=services]").val(),$staff.length>0||$service.length>0?e(".dt-sc-reservation-form").submit():alert("Please choose Service"),t.preventDefault()}),e(".start-time").each(function(){$service=e("*[name=services]").val(),$service.length>0&&t()}),e(".show-time").click(function(e){t(),e.preventDefault()}),e("body").hasClass("page-template-tpl-reservation-php")&&e("body").delegate("a.time-slot","click",function(t){t.preventDefault(),e("div.personal-info").show(),e("html, body").animate({scrollTop:e("#personalinfo").offset().top+500},2e3),e("div.choose-payment").show(),e("a.time-slot").removeClass("selected"),e(this).addClass("selected"),e("ul.time-table").find("li,ul.time-slots").removeClass("selected"),e(this).parentsUntil("ul.time-table").addClass("selected")}),e("body").delegate("select[name='payment_type']","change",function(t){$val=e(this).val(),$val.length>0?e("a.schedule-it").show():e("a.schedule-it").hide()}),e("a.schedule-it").click(function(t){if(t.preventDefault(),$staff=e("a.time-slot.selected").data("sid"),$service=e("*[name=services]").val(),$start=e("a.time-slot.selected").data("start"),$end=e("a.time-slot.selected").data("end"),$date=e("a.time-slot.selected").data("date"),$time=e("a.time-slot.selected").data("time"),$name=e("div.personal-info").find("input[name=name]").val(),$email=e("div.personal-info").find("input[name=email]").val(),$phone=e("div.personal-info").find("input[name=phone]").val(),$body=e("div.personal-info").find("textarea[name=note]").val(),$captcha=e("div.personal-info").find("input[name=captcha]").val(),$hcaptcha=e("div.personal-info").find("input[name=hiddencaptcha]").val(),""==$name.length)return alert("Please enter name"),!1;if(""==$email.length){var a=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;if(a.test($email))return alert("Please enter valid email"),!1}return $phone.length<5?(alert("Please enter Phone number"),!1):$captcha.length<=0?(alert("Please enter captcha"),!1):$captcha!==$hcaptcha?(alert("Please verify entered captcha"),!1):($payment=e("select[name='payment_type']").val(),$action="paypal"==$payment?"psychiatrist_paypal_request":"psychiatrist_new_reservation",void("undefined"!=typeof $start?e.ajax({method:"POST",url:drsmrithi_urls.ajaxurl,data:{action:$action,staff:$staff,service:$service,start:$start,end:$end,name:$name,email:$email,phone:$phone,body:$body,date:$date,time:$time},dataType:"json",success:function(e){window.location=e.url}}):e("a.schedule-it").hide()))})});